{% load thumbor_tags %}

<div class="bg-white rounded-lg border border-gray-200 overflow-hidden hover:shadow-lg transition-shadow group">
    {% if race.logo or race.background %}
        <div class="aspect-w-16 aspect-h-9 bg-gray-100">
            {% if race.background %}
                <img src="{% thumbor_url race.background.get_large_url height=180 width=320 smart=True %}"
                     alt="{{ race.title }}"
                     class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-300">
            {% elif race.logo %}
                <img src="{{ race.logo.url }}"
                     alt="{{ race.title }}"
                     class="w-full h-full object-contain p-4">
            {% endif %}
        </div>
    {% endif %}
    <div class="p-4">
        <div class="flex items-start justify-between mb-2">
            <span class="inline-block px-2 py-1 bg-red-100 text-red-700 text-xs font-semibold rounded">
                {{ race.start_datetime|date:"M j" }}
            </span>
            {% if race.distance %}
                <span class="text-xs text-gray-500">{{ race.distance }}</span>
            {% endif %}
        </div>
        <h4 class="font-bold text-gray-900 group-hover:text-red-700 mb-1">
            <a href="{{ race.get_absolute_url }}" class="hover:underline">
                {{ race.title }}
            </a>
        </h4>
        {% if race.location %}
            <p class="text-sm text-gray-600">
                <i class="fa fa-map-marker-alt mr-1"></i> {{ race.location.city }}
            </p>
        {% endif %}
    </div>
</div>
